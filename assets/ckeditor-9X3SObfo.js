import{a as ao,c as st,g as co}from"./index-CJyrgLPg.js";function uo(b,w){for(var U=0;U<w.length;U++){const O=w[U];if(typeof O!="string"&&!Array.isArray(O)){for(const A in O)if(A!=="default"&&!(A in b)){const _=Object.getOwnPropertyDescriptor(O,A);_&&Object.defineProperty(b,A,_.get?_:{enumerable:!0,get:()=>O[A]})}}}return Object.freeze(Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}))}var Z={exports:{}};/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */Z.exports;var be;function ho(){return be||(be=1,function(b,w){(function(U,O){b.exports=O(ao())})(self,U=>(()=>{var O={703:(c,l,m)=>{var f=m(414);function x(){}function V(){}V.resetWarningCache=x,c.exports=function(){function y(wt,Et,xt,Ot,R,tt){if(tt!==f){var et=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw et.name="Invariant Violation",et}}function p(){return y}y.isRequired=y;var S={array:y,bigint:y,bool:y,func:y,number:y,object:y,string:y,symbol:y,any:y,arrayOf:p,element:y,elementType:y,instanceOf:p,node:y,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:V,resetWarningCache:x};return S.PropTypes=S,S}},697:(c,l,m)=>{c.exports=m(703)()},414:c=>{c.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},787:c=>{c.exports=U}},A={};function _(c){var l=A[c];if(l!==void 0)return l.exports;var m=A[c]={exports:{}};return O[c](m,m.exports,_),m.exports}_.n=c=>{var l=c&&c.__esModule?()=>c.default:()=>c;return _.d(l,{a:l}),l},_.d=(c,l)=>{for(var m in l)_.o(l,m)&&!_.o(c,m)&&Object.defineProperty(c,m,{enumerable:!0,get:l[m]})},_.o=(c,l)=>Object.prototype.hasOwnProperty.call(c,l),_.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var at={};return(()=>{_.r(at),_.d(at,{CKEditor:()=>M,CKEditorContext:()=>mt});var c=_(787),l=_.n(c),m=_(697),f=_.n(m);const x=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},V=typeof st=="object"&&st&&st.Object===Object&&st;var y=typeof self=="object"&&self&&self.Object===Object&&self;const p=V||y||Function("return this")(),S=function(){return p.Date.now()};var wt=/\s/;const Et=function(t){for(var e=t.length;e--&&wt.test(t.charAt(e)););return e};var xt=/^\s+/;const Ot=function(t){return t&&t.slice(0,Et(t)+1).replace(xt,"")},R=p.Symbol;var tt=Object.prototype,et=tt.hasOwnProperty,ve=tt.toString,Q=R?R.toStringTag:void 0;const je=function(t){var e=et.call(t,Q),r=t[Q];try{t[Q]=void 0;var n=!0}catch{}var o=ve.call(t);return n&&(e?t[Q]=r:delete t[Q]),o};var we=Object.prototype.toString;const Ee=function(t){return we.call(t)};var xe="[object Null]",Oe="[object Undefined]",Ct=R?R.toStringTag:void 0;const W=function(t){return t==null?t===void 0?Oe:xe:Ct&&Ct in Object(t)?je(t):Ee(t)},T=function(t){return t!=null&&typeof t=="object"};var Ce="[object Symbol]";const Pe=function(t){return typeof t=="symbol"||T(t)&&W(t)==Ce};var Pt=NaN,Ae=/^[-+]0x[0-9a-f]+$/i,Te=/^0b[01]+$/i,Se=/^0o[0-7]+$/i,Re=parseInt;const At=function(t){if(typeof t=="number")return t;if(Pe(t))return Pt;if(x(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=x(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Ot(t);var r=Te.test(t);return r||Se.test(t)?Re(t.slice(2),r?2:8):Ae.test(t)?Pt:+t};var We="Expected a function",Ie=Math.max,De=Math.min;const ze=function(t,e,r){var n,o,i,s,a,v,d=0,X=!1,k=!1,H=!0;if(typeof t!="function")throw new TypeError(We);function E(j){var P=n,F=o;return n=o=void 0,d=j,s=t.apply(F,P)}function C(j){var P=j-v;return v===void 0||P>=e||P<0||k&&j-d>=i}function it(){var j=S();if(C(j))return ge(j);a=setTimeout(it,function(P){var F=e-(P-v);return k?De(F,i-(P-d)):F}(j))}function ge(j){return a=void 0,H&&n?E(j):(n=o=void 0,s)}function jt(){var j=S(),P=C(j);if(n=arguments,o=this,v=j,P){if(a===void 0)return function(F){return d=F,a=setTimeout(it,e),X?E(F):s}(v);if(k)return clearTimeout(a),a=setTimeout(it,e),E(v)}return a===void 0&&(a=setTimeout(it,e)),s}return e=At(e)||0,x(r)&&(X=!!r.leading,i=(k="maxWait"in r)?Ie(At(r.maxWait)||0,e):i,H="trailing"in r?!!r.trailing:H),jt.cancel=function(){a!==void 0&&clearTimeout(a),d=0,n=v=o=a=void 0},jt.flush=function(){return a===void 0?s:ge(S())},jt};var Me="Expected a function";const ke=function(t,e,r){var n=!0,o=!0;if(typeof t!="function")throw new TypeError(Me);return x(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),ze(t,e,{leading:n,maxWait:e,trailing:o})},Fe=function(){this.__data__=[],this.size=0},Tt=function(t,e){return t===e||t!=t&&e!=e},rt=function(t,e){for(var r=t.length;r--;)if(Tt(t[r][0],e))return r;return-1};var Ue=Array.prototype.splice;const Ne=function(t){var e=this.__data__,r=rt(e,t);return!(r<0)&&(r==e.length-1?e.pop():Ue.call(e,r,1),--this.size,!0)},qe=function(t){var e=this.__data__,r=rt(e,t);return r<0?void 0:e[r][1]},Le=function(t){return rt(this.__data__,t)>-1},$e=function(t,e){var r=this.__data__,n=rt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function N(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}N.prototype.clear=Fe,N.prototype.delete=Ne,N.prototype.get=qe,N.prototype.has=Le,N.prototype.set=$e;const nt=N,Be=function(){this.__data__=new nt,this.size=0},He=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Ve=function(t){return this.__data__.get(t)},Qe=function(t){return this.__data__.has(t)};var Ke="[object AsyncFunction]",Ge="[object Function]",Ye="[object GeneratorFunction]",Je="[object Proxy]";const St=function(t){if(!x(t))return!1;var e=W(t);return e==Ge||e==Ye||e==Ke||e==Je},ct=p["__core-js_shared__"];var Rt=function(){var t=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();const Xe=function(t){return!!Rt&&Rt in t};var Ze=Function.prototype.toString;const I=function(t){if(t!=null){try{return Ze.call(t)}catch{}try{return t+""}catch{}}return""};var tr=/^\[object .+?Constructor\]$/,er=Function.prototype,rr=Object.prototype,nr=er.toString,or=rr.hasOwnProperty,ir=RegExp("^"+nr.call(or).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const sr=function(t){return!(!x(t)||Xe(t))&&(St(t)?ir:tr).test(I(t))},ar=function(t,e){return t==null?void 0:t[e]},D=function(t,e){var r=ar(t,e);return sr(r)?r:void 0},K=D(p,"Map"),G=D(Object,"create"),cr=function(){this.__data__=G?G(null):{},this.size=0},ur=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var hr="__lodash_hash_undefined__",dr=Object.prototype.hasOwnProperty;const lr=function(t){var e=this.__data__;if(G){var r=e[t];return r===hr?void 0:r}return dr.call(e,t)?e[t]:void 0};var fr=Object.prototype.hasOwnProperty;const pr=function(t){var e=this.__data__;return G?e[t]!==void 0:fr.call(e,t)};var _r="__lodash_hash_undefined__";const yr=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=G&&e===void 0?_r:e,this};function q(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}q.prototype.clear=cr,q.prototype.delete=ur,q.prototype.get=lr,q.prototype.has=pr,q.prototype.set=yr;const Wt=q,gr=function(){this.size=0,this.__data__={hash:new Wt,map:new(K||nt),string:new Wt}},br=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},ot=function(t,e){var r=t.__data__;return br(e)?r[typeof e=="string"?"string":"hash"]:r.map},mr=function(t){var e=ot(this,t).delete(t);return this.size-=e?1:0,e},vr=function(t){return ot(this,t).get(t)},jr=function(t){return ot(this,t).has(t)},wr=function(t,e){var r=ot(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function L(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}L.prototype.clear=gr,L.prototype.delete=mr,L.prototype.get=vr,L.prototype.has=jr,L.prototype.set=wr;const Er=L;var xr=200;const Or=function(t,e){var r=this.__data__;if(r instanceof nt){var n=r.__data__;if(!K||n.length<xr-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Er(n)}return r.set(t,e),this.size=r.size,this};function $(t){var e=this.__data__=new nt(t);this.size=e.size}$.prototype.clear=Be,$.prototype.delete=He,$.prototype.get=Ve,$.prototype.has=Qe,$.prototype.set=Or;const Cr=$,Pr=function(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t},It=function(){try{var t=D(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ar=function(t,e,r){e=="__proto__"&&It?It(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var Tr=Object.prototype.hasOwnProperty;const Sr=function(t,e,r){var n=t[e];Tr.call(t,e)&&Tt(n,r)&&(r!==void 0||e in t)||Ar(t,e,r)},Rr=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var Wr="[object Arguments]";const Dt=function(t){return T(t)&&W(t)==Wr};var zt=Object.prototype,Ir=zt.hasOwnProperty,Dr=zt.propertyIsEnumerable;const zr=Dt(function(){return arguments}())?Dt:function(t){return T(t)&&Ir.call(t,"callee")&&!Dr.call(t,"callee")},ut=Array.isArray,Mr=function(){return!1};var Mt=w&&!w.nodeType&&w,kt=Mt&&!0&&b&&!b.nodeType&&b,Ft=kt&&kt.exports===Mt?p.Buffer:void 0;const Ut=(Ft?Ft.isBuffer:void 0)||Mr;var kr=9007199254740991,Fr=/^(?:0|[1-9]\d*)$/;const Ur=function(t,e){var r=typeof t;return!!(e=e??kr)&&(r=="number"||r!="symbol"&&Fr.test(t))&&t>-1&&t%1==0&&t<e};var Nr=9007199254740991;const Nt=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Nr};var h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h["[object Arguments]"]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h["[object Function]"]=h["[object Map]"]=h["[object Number]"]=h["[object Object]"]=h["[object RegExp]"]=h["[object Set]"]=h["[object String]"]=h["[object WeakMap]"]=!1;const qr=function(t){return T(t)&&Nt(t.length)&&!!h[W(t)]},ht=function(t){return function(e){return t(e)}};var qt=w&&!w.nodeType&&w,Y=qt&&!0&&b&&!b.nodeType&&b,dt=Y&&Y.exports===qt&&V.process;const B=function(){try{var t=Y&&Y.require&&Y.require("util").types;return t||dt&&dt.binding&&dt.binding("util")}catch{}}();var Lt=B&&B.isTypedArray;const Lr=Lt?ht(Lt):qr;var $r=Object.prototype.hasOwnProperty;const Br=function(t,e){var r=ut(t),n=!r&&zr(t),o=!r&&!n&&Ut(t),i=!r&&!n&&!o&&Lr(t),s=r||n||o||i,a=s?Rr(t.length,String):[],v=a.length;for(var d in t)!$r.call(t,d)||s&&(d=="length"||o&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Ur(d,v))||a.push(d);return a};var Hr=Object.prototype;const $t=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||Hr)},Bt=function(t,e){return function(r){return t(e(r))}},Vr=Bt(Object.keys,Object);var Qr=Object.prototype.hasOwnProperty;const Kr=function(t){if(!$t(t))return Vr(t);var e=[];for(var r in Object(t))Qr.call(t,r)&&r!="constructor"&&e.push(r);return e},Gr=function(t){return t!=null&&Nt(t.length)&&!St(t)},Yr=function(t){return Gr(t)?Br(t):Kr(t)};var Ht=w&&!w.nodeType&&w,Vt=Ht&&!0&&b&&!b.nodeType&&b,Qt=Vt&&Vt.exports===Ht?p.Buffer:void 0;Qt&&Qt.allocUnsafe;const Jr=function(t,e){return t.slice()},Xr=function(t,e){for(var r=-1,n=t==null?0:t.length,o=0,i=[];++r<n;){var s=t[r];e(s,r,t)&&(i[o++]=s)}return i},Zr=function(){return[]};var tn=Object.prototype.propertyIsEnumerable,Kt=Object.getOwnPropertySymbols;const en=Kt?function(t){return t==null?[]:(t=Object(t),Xr(Kt(t),function(e){return tn.call(t,e)}))}:Zr,rn=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},Gt=Bt(Object.getPrototypeOf,Object),nn=function(t,e,r){var n=e(t);return ut(t)?n:rn(n,r(t))},on=function(t){return nn(t,Yr,en)},lt=D(p,"DataView"),ft=D(p,"Promise"),pt=D(p,"Set"),_t=D(p,"WeakMap");var Yt="[object Map]",Jt="[object Promise]",Xt="[object Set]",Zt="[object WeakMap]",te="[object DataView]",sn=I(lt),an=I(K),cn=I(ft),un=I(pt),hn=I(_t),z=W;(lt&&z(new lt(new ArrayBuffer(1)))!=te||K&&z(new K)!=Yt||ft&&z(ft.resolve())!=Jt||pt&&z(new pt)!=Xt||_t&&z(new _t)!=Zt)&&(z=function(t){var e=W(t),r=e=="[object Object]"?t.constructor:void 0,n=r?I(r):"";if(n)switch(n){case sn:return te;case an:return Yt;case cn:return Jt;case un:return Xt;case hn:return Zt}return e});const yt=z;var dn=Object.prototype.hasOwnProperty;const ln=function(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&dn.call(t,"index")&&(r.index=t.index,r.input=t.input),r},ee=p.Uint8Array,gt=function(t){var e=new t.constructor(t.byteLength);return new ee(e).set(new ee(t)),e},fn=function(t,e){var r=gt(t.buffer);return new t.constructor(r,t.byteOffset,t.byteLength)};var pn=/\w*$/;const _n=function(t){var e=new t.constructor(t.source,pn.exec(t));return e.lastIndex=t.lastIndex,e};var re=R?R.prototype:void 0,ne=re?re.valueOf:void 0;const yn=function(t){return ne?Object(ne.call(t)):{}},gn=function(t,e){var r=gt(t.buffer);return new t.constructor(r,t.byteOffset,t.length)};var bn="[object Boolean]",mn="[object Date]",vn="[object Map]",jn="[object Number]",wn="[object RegExp]",En="[object Set]",xn="[object String]",On="[object Symbol]",Cn="[object ArrayBuffer]",Pn="[object DataView]",An="[object Float32Array]",Tn="[object Float64Array]",Sn="[object Int8Array]",Rn="[object Int16Array]",Wn="[object Int32Array]",In="[object Uint8Array]",Dn="[object Uint8ClampedArray]",zn="[object Uint16Array]",Mn="[object Uint32Array]";const kn=function(t,e,r){var n=t.constructor;switch(e){case Cn:return gt(t);case bn:case mn:return new n(+t);case Pn:return fn(t);case An:case Tn:case Sn:case Rn:case Wn:case In:case Dn:case zn:case Mn:return gn(t);case vn:return new n;case jn:case xn:return new n(t);case wn:return _n(t);case En:return new n;case On:return yn(t)}};var oe=Object.create;const Fn=function(){function t(){}return function(e){if(!x(e))return{};if(oe)return oe(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Un=function(t){return typeof t.constructor!="function"||$t(t)?{}:Fn(Gt(t))};var Nn="[object Map]";const qn=function(t){return T(t)&&yt(t)==Nn};var ie=B&&B.isMap;const Ln=ie?ht(ie):qn;var $n="[object Set]";const Bn=function(t){return T(t)&&yt(t)==$n};var se=B&&B.isSet;const Hn=se?ht(se):Bn;var ae="[object Arguments]",ce="[object Function]",Vn="[object GeneratorFunction]",ue="[object Object]",u={};u[ae]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object DataView]"]=u["[object Boolean]"]=u["[object Date]"]=u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Map]"]=u["[object Number]"]=u[ue]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object Symbol]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Error]"]=u[ce]=u["[object WeakMap]"]=!1;const Qn=function t(e,r,n,o,i,s){var a;if(n&&(a=i?n(e,o,i,s):n(e)),a!==void 0)return a;if(!x(e))return e;var v=ut(e);if(v)a=ln(e);else{var d=yt(e),X=d==ce||d==Vn;if(Ut(e))return Jr(e);if(d==ue||d==ae||X&&!i)a=X?{}:Un(e);else{if(!u[d])return i?e:{};a=kn(e,d)}}s||(s=new Cr);var k=s.get(e);if(k)return k;s.set(e,a),Hn(e)?e.forEach(function(E){a.add(t(E,r,n,E,e,s))}):Ln(e)&&e.forEach(function(E,C){a.set(C,t(E,r,n,C,e,s))});var H=v?void 0:on(e);return Pr(H||e,function(E,C){H&&(E=e[C=E]),Sr(a,C,t(E,r,n,C,e,s))}),a};var Kn=1,Gn=4;const Yn=function(t,e){return Qn(t,Kn|Gn,e=typeof e=="function"?e:void 0)};var Jn="[object Object]",Xn=Function.prototype,Zn=Object.prototype,he=Xn.toString,to=Zn.hasOwnProperty,eo=he.call(Object);const ro=function(t){if(!T(t)||W(t)!=Jn)return!1;var e=Gt(t);if(e===null)return!0;var r=to.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&he.call(r)==eo},no=function(t){return T(t)&&t.nodeType===1&&!ro(t)};function bt(t,e=new Set){const r=[t],n=new Set;let o=0;for(;r.length>o;){const i=r[o++];if(!(n.has(i)||oo(i)||e.has(i)))if(n.add(i),i[Symbol.iterator])try{for(const s of i)r.push(s)}catch{}else for(const s in i)s!=="defaultValue"&&r.push(i[s])}return n}function oo(t){const e=Object.prototype.toString.call(t),r=typeof t;return r==="number"||r==="boolean"||r==="string"||r==="symbol"||r==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||t==null||t._watchdogExcluded===!0||t instanceof EventTarget||t instanceof Event}function de(t,e,r=new Set){if(t===e&&typeof(n=t)=="object"&&n!==null)return!0;var n;const o=bt(t,r),i=bt(e,r);for(const s of o)if(i.has(s))return!0;return!1}class le{constructor(e){if(this.crashes=[],this.state="initializing",this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._now=Date.now,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=r=>{const n=r.error||r.reason;n instanceof Error&&this._handleError(n,r)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,r){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(r)}off(e,r){this._listeners[e]=this._listeners[e].filter(n=>n!==r)}_fire(e,...r){const n=this._listeners[e]||[];for(const o of n)o.apply(this,[null,...r])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,r){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:r.filename,lineno:r.lineno,colno:r.colno,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit?!0:(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}class fe extends le{constructor(e,r={}){super(r),this._editor=null,this._throttledSave=ke(this._save.bind(this),typeof r.saveInterval=="number"?r.saveInterval:5e3),this._creator=(n,o)=>e.create(n,o),this._destructor=n=>n.destroy()}get editor(){return this._editor}get _item(){return this._editor}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{if(typeof this._elementOrData=="string")return this.create(this._data,this._config,this._config.context);{const e=Object.assign({},this._config,{initialData:this._data});return this.create(this._elementOrData,e,e.context)}}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,r=this._config,n){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=e,this._config=this._cloneEditorConfiguration(r)||{},this._config.context=n,this._creator(e,this._config))).then(o=>{this._editor=o,o.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=o.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.flush();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._lastDocumentVersion=e}catch(r){console.error(r,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e={};for(const r of this._editor.model.document.getRootNames())e[r]=this._editor.data.get({rootName:r});return e}_isErrorComingFromThisItem(e){return de(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return Yn(e,(r,n)=>no(r)||n==="context"?r:void 0)}}const g=new Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2)),J=Symbol("MainQueueId");class pe extends le{constructor(e,r={}){super(r),this._watchdogs=new Map,this._watchdogConfig=r,this._context=null,this._contextProps=new Set,this._actionQueues=new io,this._creator=n=>e.create(n),this._destructor=n=>n.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(J,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const r=_e(e);return Promise.all(r.map(n=>this._actionQueues.enqueue(n.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let o;if(this._watchdogs.has(n.id))throw new Error(`Item with the given id is already added: '${n.id}'.`);if(n.type==="editor")return o=new fe(this._watchdogConfig),o.setCreator(n.creator),o._setExcludedProperties(this._contextProps),n.destructor&&o.setDestructor(n.destructor),this._watchdogs.set(n.id,o),o.on("error",(i,{error:s,causesRestart:a})=>{this._fire("itemError",{itemId:n.id,error:s}),a&&this._actionQueues.enqueue(n.id,()=>new Promise(v=>{o.on("restart",(function d(){o.off("restart",d),this._fire("itemRestart",{itemId:n.id}),v()}).bind(this))}))}),o.create(n.sourceElementOrData,n.config,this._context);throw new Error(`Not supported item type: '${n.type}'.`)})))}remove(e){const r=_e(e);return Promise.all(r.map(n=>this._actionQueues.enqueue(n,()=>{const o=this._getWatchdog(n);return this._watchdogs.delete(n),o.destroy()})))}destroy(){return this._actionQueues.enqueue(J,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(J,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=bt(this._context),Promise.all(Array.from(this._watchdogs.values()).map(r=>(r._setExcludedProperties(this._contextProps),r.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(r=>r.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const r=this._watchdogs.get(e);if(!r)throw new Error(`Item with the given id was not registered: ${e}.`);return r}_isErrorComingFromThisItem(e){for(const r of this._watchdogs.values())if(r._isErrorComingFromThisItem(e))return!1;return de(this._context,e.context)}}class io{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._actions=new WeakMap,this._lastActionId=0,this._activeActions=0}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,r){const n=e===J;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const o=(n?Promise.all(this._queues.values()):Promise.all([this._queues.get(J),this._queues.get(e)])).then(r),i=o.catch(()=>{});return this._queues.set(e,i),o.finally(()=>{this._activeActions--,this._queues.get(e)===i&&this._activeActions===0&&this._onEmptyCallbacks.forEach(s=>s())})}}function _e(t){return Array.isArray(t)?t:[t]}const ye=l().createContext("contextWatchdog");class mt extends l().Component{constructor(e,r){super(e,r),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}async shouldComponentUpdate(e){return e.id!==this.props.id&&(this.contextWatchdog&&await this.contextWatchdog.destroy(),await this._initializeContextWatchdog(e.config)),e.isLayoutReady&&!this.contextWatchdog?(await this._initializeContextWatchdog(e.config),!0):this.props.children!==e.children}render(){return l().createElement(ye.Provider,{value:this.contextWatchdog},this.props.children)}async componentWillUnmount(){await this._destroyContext()}async _initializeContextWatchdog(e){this.contextWatchdog=new pe(this.props.context,this.props.watchdogConfig),this.contextWatchdog.on("error",(r,n)=>{this.props.onError(n.error,{phase:"runtime",willContextRestart:n.causesRestart})}),this.contextWatchdog.on("stateChange",()=>{this.contextWatchdog.state==="ready"&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)}),await this.contextWatchdog.create(e).catch(r=>{this.props.onError(r,{phase:"initialization",willContextRestart:!1})})}async _destroyContext(){this.contextWatchdog&&(await this.contextWatchdog.destroy(),this.contextWatchdog=null)}}mt.defaultProps={isLayoutReady:!0,onError:(t,e)=>console.error(t,e)},mt.propTypes={id:f().string,isLayoutReady:f().bool,context:f().func,watchdogConfig:f().object,config:f().object,onReady:f().func,onError:f().func};const vt="Lock from React integration (@ckeditor/ckeditor5-react)";class M extends l().Component{constructor(e){super(e),this.editorDestructionInProgress=null,this.domContainer=l().createRef(),this.watchdog=null;const{CKEDITOR_VERSION:r}=window;if(r){const[n]=r.split(".").map(Number);n<34&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 34 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}get editor(){return this.watchdog?this.watchdog.editor:null}shouldComponentUpdate(e){return!!this.editor&&(e.id!==this.props.id||(this._shouldUpdateEditor(e)&&this.editor.setData(e.data),"disabled"in e&&(e.disabled?this.editor.enableReadOnlyMode(vt):this.editor.disableReadOnlyMode(vt)),!1))}async componentDidMount(){await this._initializeEditor()}async componentDidUpdate(){await this._destroyEditor(),await this._initializeEditor()}async componentWillUnmount(){await this._destroyEditor()}render(){return l().createElement("div",{ref:this.domContainer})}async _initializeEditor(){await this.editorDestructionInProgress,this.watchdog||(this.context instanceof pe?this.watchdog=new so(this.context):this.watchdog=new M._EditorWatchdog(this.props.editor,this.props.watchdogConfig),this.watchdog.setCreator((e,r)=>this._createEditor(e,r)),this.watchdog.on("error",(e,{error:r,causesRestart:n})=>{this.props.onError(r,{phase:"runtime",willEditorRestart:n})}),await this.watchdog.create(this.domContainer.current,this._getConfig()).catch(e=>this.props.onError(e,{phase:"initialization",willEditorRestart:!1})))}_createEditor(e,r){return this.props.editor.create(e,r).then(n=>{"disabled"in this.props&&this.props.disabled&&n.enableReadOnlyMode(vt);const o=n.model.document,i=n.editing.view.document;return o.on("change:data",s=>{this.props.onChange&&this.props.onChange(s,n)}),i.on("focus",s=>{this.props.onFocus&&this.props.onFocus(s,n)}),i.on("blur",s=>{this.props.onBlur&&this.props.onBlur(s,n)}),setTimeout(()=>{this.props.onReady&&this.props.onReady(n)}),n})}async _destroyEditor(){this.editorDestructionInProgress=new Promise(e=>{setTimeout(()=>{this.watchdog?this.watchdog.destroy().then(()=>{this.watchdog=null,e()}):e()})})}_shouldUpdateEditor(e){return this.props.data!==e.data&&this.editor.getData()!==e.data}_getConfig(){return this.props.data&&this.props.config.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` properties. The config property is over the data value and the first one will be used when specified both."),{...this.props.config,initialData:this.props.config.initialData||this.props.data||""}}}class so{constructor(e){this._contextWatchdog=e,this._id=function(){const r=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,o=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0;return"e"+g[r>>0&255]+g[r>>8&255]+g[r>>16&255]+g[r>>24&255]+g[n>>0&255]+g[n>>8&255]+g[n>>16&255]+g[n>>24&255]+g[o>>0&255]+g[o>>8&255]+g[o>>16&255]+g[o>>24&255]+g[i>>0&255]+g[i>>8&255]+g[i>>16&255]+g[i>>24&255]}()}setCreator(e){this._creator=e}create(e,r){return this._contextWatchdog.add({sourceElementOrData:e,config:r,creator:this._creator,id:this._id,type:"editor"})}on(e,r){this._contextWatchdog.on("itemError",(n,{itemId:o,causesRestart:i,error:s})=>{o===this._id&&r(null,{error:s,causesRestart:i})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}M.contextType=ye,M.propTypes={editor:f().func.isRequired,data:f().string,config:f().object,watchdogConfig:f().object,onChange:f().func,onReady:f().func,onFocus:f().func,onBlur:f().func,onError:f().func,disabled:f().bool,onInit:(t,e)=>{if(t[e])return new Error('The "onInit" property is not supported anymore by the CKEditor component. Use the "onReady" property instead.')}},M.defaultProps={config:{},onError:(t,e)=>console.error(t,e)},M._EditorWatchdog=fe})(),at})())}(Z,Z.exports)),Z.exports}var me=ho();const lo=co(me),po=uo({__proto__:null,default:lo},[me]);export{po as c};
